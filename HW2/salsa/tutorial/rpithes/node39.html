<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<!--Converted with LaTeX2HTML 2018 (Released Feb 1, 2018) -->
<HTML>
<HEAD>
<TITLE>Join Block Continuations</TITLE>
<META NAME="description" CONTENT="Join Block Continuations">
<META NAME="keywords" CONTENT="rpithes">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META NAME="Generator" CONTENT="LaTeX2HTML v2018">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="rpithes.css">

<LINK REL="next" HREF="node40.html">
<LINK REL="previous" HREF="node38.html">
<LINK REL="up" HREF="node37.html">
<LINK REL="next" HREF="node40.html">
</HEAD>

<BODY >

<DIV CLASS="navigation"><!--Navigation Panel-->
<A NAME="tex2html634"
  HREF="node40.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png"></A> 
<A NAME="tex2html630"
  HREF="node37.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png"></A> 
<A NAME="tex2html624"
  HREF="node38.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png"></A> 
<A NAME="tex2html632"
  HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png"></A>  
<BR>
<B> Next:</B> <A NAME="tex2html635"
  HREF="node40.html">Message Properties</A>
<B> Up:</B> <A NAME="tex2html631"
  HREF="node37.html">Advanced Concurrency Coordination</A>
<B> Previous:</B> <A NAME="tex2html625"
  HREF="node38.html">Named Tokens</A>
 &nbsp; <B>  <A NAME="tex2html633"
  HREF="node1.html">Contents</A></B> 
<BR>
<BR></DIV>
<!--End of Navigation Panel-->

<H1><A NAME="SECTION00620000000000000000">
Join Block Continuations</A>
</H1>

<P>
Chapter&nbsp;<A HREF="node9.html#Writing_Concurrent_Programs"><IMG  ALIGN="BOTTOM" BORDER="1" ALT="[*]" SRC="crossref.png"></A> skips some important issues of join 
blocks. In this section, 
we are going to introduce how to use the return values of statements inside a join block and how to 
implement the join block reception handler.

<P>
A join block always returns <SPAN  CLASS="textit">an object array</SPAN> if it joins 
several messages to a reserved keyword <TT>token</TT>, or a named token. 
If those message handlers to be joined do not return
(<TT>void</TT> type return), or the return values are ignored, the join block 
functions like a barrier for parallel message processing.

<P>
The named token can be applied to the join block as follows:
 
  <table border="1" cellpadding="2" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" id="AutoNumber1">
   <tr><td><pre> 
1. token x = join {
2.    a&lt;-m1();
3.    b&lt;-m2();
4. };
  
   </pre></td></tr>
  </table> 
The return value of the join block is received by 
the join block reception handler. Every join block reception handler
must have only one argument with the type of the object array. 
The following example illustrates how to access the join block return 
values through tokens.  
In lines 16-20, the message <TT>multiply</TT> will not be processed 
until the three messages <TT>add(2,3)</TT>, <TT>add(3,4)</TT>, and <TT>add(2,4)</TT> 
are processed. The token passed to <TT>multiply</TT> is an 
array of <TT>Integers</TT> generated by the three <TT>adds</TT> messages. 
The message handler <TT>multiply(Object numbers[])</TT> in lines 3-7 
is the join block reception handler.
 
  <table border="1" cellpadding="2" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" id="AutoNumber1">
   <tr><td><pre> 
1. behavior JoinContinuation {
2.
3.   int multiply(Object numbers[]){
4.     return ((Integer)numbers[0]).intValue() * 
5.            ((Integer)numbers[1]).intValue() * 
6.            ((Integer)numbers[2]).intValue();
7.   }
8.
9.   int add(int n1, int n2) {
10.    return n1 + n2;
11.  }
12.
13.  void act(String args[]) {
14.
15.    standardOutput&lt;-print("Value: ") @ 
16.    join {
17.      add(2,3);
18.      add(3,4);
19.      add(2,4);
20.    } @ multiply( token ) @ standardOutput&lt;-println( token );
21.  }
22.
23.}
  
   </pre></td></tr>
  </table> 

<DIV CLASS="navigation"><HR>
<!--Navigation Panel-->
<A NAME="tex2html634"
  HREF="node40.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png"></A> 
<A NAME="tex2html630"
  HREF="node37.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png"></A> 
<A NAME="tex2html624"
  HREF="node38.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png"></A> 
<A NAME="tex2html632"
  HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png"></A>  
<BR>
<B> Next:</B> <A NAME="tex2html635"
  HREF="node40.html">Message Properties</A>
<B> Up:</B> <A NAME="tex2html631"
  HREF="node37.html">Advanced Concurrency Coordination</A>
<B> Previous:</B> <A NAME="tex2html625"
  HREF="node38.html">Named Tokens</A>
 &nbsp; <B>  <A NAME="tex2html633"
  HREF="node1.html">Contents</A></B> </DIV>
<!--End of Navigation Panel-->

</BODY>
</HTML>
